<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>BLEXT editor</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/index.css" rel="stylesheet">
    <link href="css/bootstrap-markdown.min.css" rel="stylesheet">
    <link href="css/sidebar.min.css" rel="stylesheet">

    <script src="https://use.fontawesome.com/ab291d07ba.js"></script>
</head>

<body>
    <div class="wrapper jsc-sidebar-content jsc-sidebar-pulled">
        <nav class="top-nav">
            <div>
                <i class="fa fa-bars jsc-sidebar-trigger link-menu" aria-hidden="true"></i>                
            </div>
        </nav>
        <textarea name="plainText" id="plainText" placeholder="Write your Markdown content here" style="outline: none;"></textarea>
    </div>
    <nav class="sidebar jsc-sidebar" id="jsi-nav" data-sidebar-options="">
        <ul class="sidebar-list">
            <li><a href="#SignIn" data-toggle="collapse"  class="current">Sign In</a></li>
			<li>
				<form id="SignIn" " class="sidebar-collapse collapse" role="form" style="padding-left: 5px; padding-right:5px;">
					<div class="form-group">
						<label for="exampleInputEmail1">Email address</label>
						<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
					</div>
					<div class="form-group">
						<label for="exampleInputPassword1">Password</label>
						<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
					</div>
					<button type="button" class="btn btn-default"onclick="requestAuth()">提交</button>
					<script>
					function requestAuth(){
						var request = new ActiveXObject('Microsoft.XMLHTTP'); // 新建Microsoft.XMLHTTP对象

						request.onreadystatechange = function () { // 状态发生变化时，函数被回调
							if (request.readyState === 4) { // 成功完成
								// 判断响应结果:
								if (request.status === 200) {
									// 成功，通过responseText拿到响应的文本:
									return success(request.responseText);
								} else {
									// 失败，根据响应码判断失败原因:
									return fail(request.status);
								}
							} else {
								// HTTP请求还在继续...
							}
						}
						request.ajax({
							xhrFields:{
								withCredentials:true
							},
							header:{
								'Authorization': 'Basic ' + btoa('380554381@qq.com:cat')
							}
						})

						// 发送请求:
						request.open('GET', 'https://blext.herokuapp.com/api/v1.0/token/');
						request.send();					
					}
					</script>
				</form>
			</li>
            <li><a href="#date_data" data-toggle="collapse" >View History</a></li>
			<div id="date_data" class="sidebar-collapse collapse" role="menu" style="padding-left: 5px; padding-right:5px;">
				<div class="dropdown">
					<button id="dYearLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Year
						<span class="caret"></span>
						<ul class="dropdown-menu"  role="menu1" aria-labelledby="dMonthLabel">
							<li><a href="#day">1</a></li>
							<li><a href="#day">2</a></li>
							<li><a href="#day">3</a></li>
							<li><a href="#day">4</a></li>
							<li><a href="#day">5</a></li>
							<li><a href="#day">6</a></li>
							<li><a href="#day">7</a></li>
							<li><a href="#day">8</a></li>
							<li><a href="#day">9</a></li>
							<li><a href="#day">10</a></li>
							<li><a href="#day">11</a></li>
							<li><a href="#day">12</a></li>
						</ul>	
					</button>
	
					<button id="dMonthLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Month
						<span class="caret"></span>
					</button>
					
					<ul class="dropdown-menu"  role="menu2" aria-labelledby="dYearLabel">
						<li><a href="#day">2</a></li>
						<li><a href="#day">2</a></li>
						<li><a href="#day">3</a></li>
						<li><a href="#day">4</a></li>
						<li><a href="#day">5</a></li>
						<li><a href="#day">6</a></li>
						<li><a href="#day">7</a></li>
						<li><a href="#day">8</a></li>
						<li><a href="#day">9</a></li>
						<li><a href="#day">10</a></li>
						<li><a href="#day">11</a></li>
						<li><a href="#day">12</a></li>
					</ul>
					<button id="viewAll" type="button">
						ALL
					</button>
				</div>
			</div>
            <li><a href="#" data-toggle="collapse" >Options</a></li>
        </ul>
    </nav>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/marked.min.js"></script>
    <script src="js/sidebar.min.js"></script>
    <script src="js/bootstrap-markdown.js"></script>
    
    <script>
    window.onload = function() {
        $("#plainText").markdown({
            autofocus: true,
            iconlibrary: 'fa',
            height: 'editor',
            'fullscreen': false
        });

        $('#jsi-nav').sidebar({
            trigger: '.jsc-sidebar-trigger',
            scrollbarDisplay: true,
            pullCb: function() {
                console.log('pull');
            },
            pushCb: function() {
                console.log('push');
            }
       });


        function reset_size() {
            $('.md-editor').height($('.wrapper').height() - $('.top-nav').outerHeight());
            $('textarea').height($('.md-editor').height() - $('.md-header').outerHeight());  
        };
        reset_size();
        window.onresize = reset_size;
    }
    </script>
    
</body>

</html>